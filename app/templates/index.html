<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACOS Forecast Calculator - Nowoczesny kalkulator rentowno≈õci kampanii</title>
    <meta name="description" content="Profesjonalny kalkulator ACOS do analizy rentowno≈õci kampanii reklamowych z integracjƒÖ NBP API i przeliczaniem w czasie rzeczywistym">
    <meta name="keywords" content="ACOS, kalkulator, rentowno≈õƒá, kampanie reklamowe, ROI, Amazon, PPC">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-logo">
                <img src="https://amzteam.pro/wp-content/uploads/2024/01/AMZ-LOGO-EBISU.svg" alt="AmzTeam.pro Logo" class="logo">
            </div>
            <div class="header-content">
                <h1>ACOS Forecast Calculator</h1>
                <p>Profesjonalny kalkulator prognoz rentowno≈õci kampanii reklamowych</p>
            </div>
        </header>

        <!-- Komunikaty b≈Çƒôd√≥w i sukces√≥w -->
        {% if error %}
        <div class="alert alert-error">
            <strong>B≈ÇƒÖd:</strong> {{ error }}
        </div>
        {% endif %}

        {% if success %}
        <div class="alert alert-success">
            <strong>Sukces:</strong> {{ success }}
        </div>
        {% endif %}

        <!-- Wyb√≥r metody wprowadzania danych -->
        <section class="input-method-section">
            <h2>1. Metoda wprowadzania danych</h2>
            <p>Wybierz spos√≥b wprowadzenia danych do kalkulatora ACOS</p>
            <div class="method-selector">
                <article class="method-option" id="manual-method">
                    <div class="method-icon">‚öôÔ∏è</div>
                    <h3>Manual Inputs</h3>
                    <p>Wprowad≈∫ docelowe wska≈∫niki kampanii u≈ºywajƒÖc interaktywnych suwak√≥w i p√≥l numerycznych</p>
                    <button type="button" class="btn btn-primary" onclick="selectMethod('manual')">Wybierz metodƒô</button>
                </article>
                <article class="method-option" id="upload-method">
                    <div class="method-icon">üì§</div>
                    <h3>Bulk Operations Upload</h3>
                    <p>Prze≈õlij raport z danymi kampanii aby automatycznie wype≈Çniƒá metryki prognozy</p>
                    <button type="button" class="btn btn-secondary" onclick="selectMethod('upload')">Wybierz metodƒô</button>
                </article>
            </div>
        </section>

        <!-- Formularz z suwakami dla zaawansowanych metryk -->
        <section class="form-section forecast-variables-section" id="forecast-form" style="display: none;">
            <h2>2. Zmienne prognozy</h2>
            <p>Wprowad≈∫ docelowe wska≈∫niki kampanii rƒôcznie lub u≈ºyj interaktywnych suwak√≥w aby dostosowaƒá warto≈õci. Wyniki przeliczajƒÖ siƒô automatycznie w czasie rzeczywistym.</p>
            
            <form method="POST" action="/calculate-forecast" class="forecast-form">
                <div class="variables-grid">
                    <!-- Mar≈ºa brutto -->
                    <div class="variable-item">
                        <label for="gross_margin">Mar≈ºa brutto (%)</label>
                        <div class="slider-container">
                            <input type="range" id="gross_margin_slider" min="0" max="100" step="0.1" 
                                   value="{{ gross_margin if gross_margin else '30' }}" 
                                   oninput="updateSliderValue('gross_margin', this.value)">
                            <input type="number" id="gross_margin" name="gross_margin" step="0.1" min="0" max="100" 
                                   value="{{ gross_margin if gross_margin else '30' }}" 
                                   onchange="updateSliderFromInput('gross_margin', this.value)" required>
                        </div>
                        <small>Mar≈ºa zysku produktu przed kosztami reklamy</small>
                    </div>

                    <!-- Target AOV -->
                    <div class="variable-item">
                        <label for="target_aov">Docelowa warto≈õƒá zam√≥wienia (EUR)</label>
                        <div class="slider-container">
                            <input type="range" id="target_aov_slider" min="5" max="500" step="0.1" 
                                   value="{{ target_aov if target_aov else '25' }}" 
                                   oninput="updateSliderValue('target_aov', this.value)">
                            <input type="number" id="target_aov" name="target_aov" step="0.1" min="5" max="500" 
                                   value="{{ target_aov if target_aov else '25' }}" 
                                   onchange="updateSliderFromInput('target_aov', this.value)" required>
                        </div>
                        <small>Oczekiwana ≈õrednia warto≈õƒá zam√≥wienia w EUR</small>
                    </div>

                    <!-- Target CTR -->
                    <div class="variable-item">
                        <label for="target_ctr">Docelowy CTR (%)</label>
                        <div class="slider-container">
                            <input type="range" id="target_ctr_slider" min="0.1" max="20" step="0.1" 
                                   value="{{ target_ctr if target_ctr else '3' }}" 
                                   oninput="updateSliderValue('target_ctr', this.value)">
                            <input type="number" id="target_ctr" name="target_ctr" step="0.1" min="0.1" max="20" 
                                   value="{{ target_ctr if target_ctr else '3' }}" 
                                   onchange="updateSliderFromInput('target_ctr', this.value)" required>
                        </div>
                        <small>Oczekiwany wsp√≥≈Çczynnik klikalno≈õci</small>
                    </div>

                    <!-- Target CPC -->
                    <div class="variable-item">
                        <label for="target_cpc">Docelowy CPC (EUR)</label>
                        <div class="slider-container">
                            <input type="range" id="target_cpc_slider" min="0.1" max="20" step="0.1" 
                                   value="{{ target_cpc if target_cpc else '1' }}" 
                                   oninput="updateSliderValue('target_cpc', this.value)">
                            <input type="number" id="target_cpc" name="target_cpc" step="0.1" min="0.1" max="20" 
                                   value="{{ target_cpc if target_cpc else '1' }}" 
                                   onchange="updateSliderFromInput('target_cpc', this.value)" required>
                        </div>
                        <small>Oczekiwany koszt za klikniƒôcie w EUR (Bid)</small>
                    </div>

                    <!-- Target CVR -->
                    <div class="variable-item">
                        <label for="target_cvr">Docelowy CVR (%)</label>
                        <div class="slider-container">
                            <input type="range" id="target_cvr_slider" min="0.1" max="30" step="0.1" 
                                   value="{{ target_cvr if target_cvr else '3' }}" 
                                   oninput="updateSliderValue('target_cvr', this.value)">
                            <input type="number" id="target_cvr" name="target_cvr" step="0.1" min="0.1" max="30" 
                                   value="{{ target_cvr if target_cvr else '3' }}" 
                                   onchange="updateSliderFromInput('target_cvr', this.value)" required>
                        </div>
                        <small>Oczekiwany wsp√≥≈Çczynnik konwersji</small>
                    </div>

                    <!-- Impressions -->
                    <div class="variable-item">
                        <label for="impressions">Wy≈õwietlenia</label>
                        <div class="slider-container">
                            <input type="range" id="impressions_slider" min="100" max="100000" step="100" 
                                   value="{{ impressions if impressions else '1000' }}" 
                                   oninput="updateSliderValue('impressions', this.value)">
                            <input type="number" id="impressions" name="impressions" step="100" min="100" max="100000" 
                                   value="{{ impressions if impressions else '1000' }}" 
                                   onchange="updateSliderFromInput('impressions', this.value)" required>
                        </div>
                        <small>Oczekiwana liczba wy≈õwietle≈Ñ reklamy</small>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">Oblicz prognozƒô</button>
            </form>
        </section>

        <!-- Prosty formularz do oblicze≈Ñ (ukryty domy≈õlnie) -->
        <section class="form-section" id="simple-form" style="display: none;">
            <h2>Wprowad≈∫ dane kampanii</h2>
            <form method="POST" action="/calculate" class="calculation-form">
                <div class="form-group">
                    <label for="sales">Prognozowana sprzeda≈º (PLN)</label>
                    <input type="number" id="sales" name="sales" step="0.01" min="0" 
                           value="{{ sales if sales else '' }}" 
                           placeholder="np. 10000.00" required>
                </div>

                <div class="form-group">
                    <label for="spend">Prognozowane wydatki na reklamƒô (PLN)</label>
                    <input type="number" id="spend" name="spend" step="0.01" min="0" 
                           value="{{ spend if spend else '' }}" 
                           placeholder="np. 2000.00" required>
                </div>

                <div class="form-group">
                    <label for="margin">Mar≈ºa brutto (%)</label>
                    <input type="number" id="margin" name="margin" step="0.01" min="0" max="100" 
                           value="{{ margin if margin else '' }}" 
                           placeholder="np. 25.00" required>
                </div>

                <button type="submit" class="btn btn-primary">Oblicz ACOS</button>
            </form>
        </section>

        <!-- Upload pliku -->
        <section class="form-section">
            <h2>Import danych z pliku</h2>
            <form method="POST" action="/upload" enctype="multipart/form-data" class="upload-form">
                <div class="form-group">
                    <label for="file">Przes≈Çij plik CSV z danymi</label>
                    <input type="file" id="file" name="file" accept=".csv" required>
                    <small class="form-text">Dozwolone formaty: CSV</small>
                </div>
                <button type="submit" class="btn btn-secondary">Prze≈õlij plik</button>
            </form>
        </section>

        <!-- Wyniki oblicze≈Ñ -->
        {% if results %}
        <section class="results-section">
            <h2>Wyniki analizy</h2>
            
            <!-- Komunikat o rentowno≈õci -->
            {% if results.profitability_message %}
            <div class="alert {{ 'alert-success' if results.is_profitable else 'alert-error' }}">
                {{ results.profitability_message }}
            </div>
            {% endif %}

            <!-- Forecast Results - g≈Ç√≥wne metryki zgodnie ze screenshotem -->
            <div class="forecast-results-header">
                <h2>3. Forecast Results</h2>
                {% if results.currency_info %}
                <div class="currency-info">
                    <small>üí± {{ results.currency_info }}</small>
                </div>
                {% endif %}
            </div>

            <div class="forecast-grid">
                <!-- G√≥rny rzƒÖd - g≈Ç√≥wne wyniki -->
                <div class="metric-card projected-sales">
                    <h3>Projected Sales</h3>
                    <div class="metric-value blue">
                        ‚Ç¨{{ results.projected_sales|int }}
                    </div>
                    <div class="metric-icon">üìà</div>
                </div>

                <div class="metric-card projected-spend">
                    <h3>Projected Spend</h3>
                    <div class="metric-value red">
                        ‚Ç¨{{ results.projected_spend|int }}
                    </div>
                    <div class="metric-icon">üí∞</div>
                </div>

                <!-- Drugi rzƒÖd -->
                <div class="metric-card expected-acos">
                    <h3>Expected ACOS</h3>
                    <div class="metric-value {{ 'profitable' if results.is_profitable else 'unprofitable' }}">
                        {{ results.acos|int }}%
                    </div>
                    <div class="metric-icon">üéØ</div>
                </div>

                <div class="metric-card roi">
                    <h3>ROI</h3>
                    <div class="metric-value {{ 'profitable' if results.roi > 0 else 'unprofitable' }}">
                        {{ results.roi|int }}%
                    </div>
                    <div class="metric-icon">üìä</div>
                </div>

                <!-- Trzeci rzƒÖd -->
                <div class="metric-card profit-per-sale">
                    <h3>Profit per Sale</h3>
                    <div class="metric-value {{ 'profitable' if results.profit_per_sale > 0 else 'unprofitable' }}">
                        ‚Ç¨{{ results.profit_per_sale|int }}
                    </div>
                    <div class="metric-icon">üí∏</div>
                </div>

                <div class="metric-card total-profit">
                    <h3>Total Profit</h3>
                    <div class="metric-value {{ 'profitable' if results.profit > 0 else 'unprofitable' }}">
                        ‚Ç¨{{ results.profit|int }}
                    </div>
                    <div class="metric-icon">üíµ</div>
                </div>

                <!-- Czwarty rzƒÖd - dodatkowe metryki -->
                <div class="metric-card projected-clicks">
                    <h3>Projected Clicks</h3>
                    <div class="metric-value neutral">
                        {{ results.clicks|int }}
                    </div>
                </div>

                <div class="metric-card projected-orders">
                    <h3>Projected Orders</h3>
                    <div class="metric-value neutral">
                        {{ results.orders|int }}
                    </div>
                </div>

                <!-- PiƒÖty rzƒÖd -->
                <div class="metric-card projected-spend-alt">
                    <h3>Projected Spend</h3>
                    <div class="metric-value neutral">
                        ‚Ç¨{{ results.projected_spend|int }}
                    </div>
                </div>

                <div class="metric-card break-even-acos">
                    <h3>Break-even ACOS</h3>
                    <div class="metric-value neutral">
                        {{ results.break_even_acos|int }}%
                    </div>
                </div>
            </div>

            <!-- Ostrze≈ºenie o nierentowno≈õci jak na screenshocie -->
            {% if not results.is_profitable %}
            <div class="unprofitable-warning">
                <div class="warning-icon">‚ö†Ô∏è</div>
                <div class="warning-content">
                    <h3>Nierentowna kampania</h3>
                    <p>{{ results.profitability_message }}</p>
                </div>
            </div>
            {% endif %}

            <!-- Przycisk eksportu wynik√≥w -->
            <div class="export-section">
                <h3>Eksport wynik√≥w do planowania bud≈ºetu</h3>
                <form method="POST" action="/export-results" class="export-form">
                    <input type="hidden" name="gross_margin" value="{{ gross_margin }}">
                    <input type="hidden" name="target_aov" value="{{ target_aov }}">
                    <input type="hidden" name="target_ctr" value="{{ target_ctr }}">
                    <input type="hidden" name="target_cpc" value="{{ target_cpc }}">
                    <input type="hidden" name="target_cvr" value="{{ target_cvr }}">
                    <input type="hidden" name="impressions" value="{{ impressions }}">
                    <button type="submit" class="btn btn-export">
                        üì• Pobierz dane prognozy (JSON)
                    </button>
                </form>
            </div>

            <!-- Podsumowanie -->
            <div class="summary-section">
                <h3>Podsumowanie</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="label">Prognozowana sprzeda≈º:</span>
                        <span class="value">‚Ç¨{{ results.projected_sales|int }}</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Wydatki na reklamƒô:</span>
                        <span class="value">‚Ç¨{{ results.projected_spend|int }}</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Mar≈ºa brutto:</span>
                        <span class="value">{{ results.gross_margin }}%</span>
                    </div>
                </div>
            </div>
        </section>
        {% endif %}

        <!-- Informacje o narzƒôdziu -->
        <section class="info-section">
            <h2>üìä ACOS Forecast Calculator</h2>
            <div class="tool-description">
                <h3>üéØ Co robi to narzƒôdzie?</h3>
                <p>Oblicza i prognozuje Advertising Cost of Sale (ACOS) aby zoptymalizowaƒá rentowno≈õƒá kampanii i alokacjƒô bud≈ºetu. Przewiduje ACOS na podstawie metryk CTR, CVR, AOV i CPC z szczeg√≥≈ÇowƒÖ analizƒÖ zysku w czasie rzeczywistym.</p>
                
                <h3>‚ö° Kluczowe funkcje:</h3>
                <ul>
                    <li><strong>Prognozowanie ACOS:</strong> Przewiduje koszt reklamy wzglƒôdem sprzeda≈ºy na podstawie metryk wydajno≈õci</li>
                    <li><strong>Analiza zysku:</strong> Oblicza oczekiwany zysk na sprzeda≈º po kosztach reklamy</li>
                    <li><strong>Ustawianie cel√≥w:</strong> Optymalizuje CTR, CVR, AOV i CPC dla rentowno≈õci</li>
                    <li><strong>Planowanie bud≈ºetu:</strong> Planuje wydatki na reklamƒô na podstawie oczekiwanej wydajno≈õci</li>
                    <li><strong>Przeliczanie w czasie rzeczywistym:</strong> Automatyczne aktualizowanie wynik√≥w przy zmianie parametr√≥w</li>
                    <li><strong>Integracja z NBP:</strong> Aktualny kurs EUR/PLN z Narodowego Banku Polskiego</li>
                </ul>

                <h3>üöÄ Jak u≈ºywaƒá tego narzƒôdzia:</h3>
                <ol>
                    <li>Wybierz metodƒô wprowadzania danych: prze≈õlij plik operacji hurtowych lub u≈ºyj rƒôcznych danych</li>
                    <li>Ustaw zmienne: skonfiguruj mar≈ºƒô brutto, CTR, CVR, AOV i cele CPC u≈ºywajƒÖc suwak√≥w</li>
                    <li>Przejrzyj prognozƒô: analizuj oczekiwane projekcje ACOS i zysku w czasie rzeczywistym</li>
                    <li>Dostosuj cele: dostrajaj metryki aby zoptymalizowaƒá rentowno≈õƒá</li>
                    <li>Eksportuj wyniki: pobierz dane prognozy do planowania bud≈ºetu</li>
                </ol>

                <h3>üî¨ Formu≈Ça ACOS:</h3>
                <div class="formula-box">
                    <p><strong>ACOS = Ad Spend / Ad Sales</strong></p>
                    <p><strong>ACOS = (Bid √ó Clicks) / [(Impressions √ó CTR%) √ó CVR% √ó AOV]</strong></p>
                    <small>Zbalansuj koszty reklamy z mar≈ºami zysku u≈ºywajƒÖc szczeg√≥≈Çowych metryk wydajno≈õci.</small>
                </div>
            </div>
        </section>
    </div>

    <footer>
        <p>&copy; 2024 ACOS Forecast Calculator. Profesjonalny kalkulator analizy rentowno≈õci kampanii reklamowych z integracjƒÖ NBP API.</p>
    </footer>

    <script>
        // Funkcja do wyboru metody wprowadzania danych
        function selectMethod(method) {
            const forecastForm = document.getElementById('forecast-form');
            const simpleForm = document.getElementById('simple-form');
            const uploadSection = document.querySelector('.upload-form').parentElement;
            
            if (method === 'manual') {
                forecastForm.style.display = 'block';
                simpleForm.style.display = 'none';
                uploadSection.style.display = 'none';
                
                // Pod≈õwietlenie wybranej opcji
                document.getElementById('manual-method').classList.add('selected');
                document.getElementById('upload-method').classList.remove('selected');
            } else if (method === 'upload') {
                forecastForm.style.display = 'none';
                simpleForm.style.display = 'none';
                uploadSection.style.display = 'block';
                
                // Pod≈õwietlenie wybranej opcji
                document.getElementById('upload-method').classList.add('selected');
                document.getElementById('manual-method').classList.remove('selected');
            }
        }

        // Funkcja do aktualizacji warto≈õci pola liczbowego na podstawie suwaka
        function updateSliderValue(fieldName, value) {
            const numberInput = document.getElementById(fieldName);
            const slider = document.getElementById(fieldName + '_slider');
            
            numberInput.value = value;
            
            // Aktualizacja koloru suwaka na podstawie warto≈õci
            updateSliderColor(slider, value);
            
            // Automatyczne przeliczenie w czasie rzeczywistym z debouncing
            clearTimeout(window.calculateTimeout);
            window.calculateTimeout = setTimeout(calculateRealTime, 300);
        }

        // Funkcja do aktualizacji suwaka na podstawie pola liczbowego
        function updateSliderFromInput(fieldName, value) {
            const slider = document.getElementById(fieldName + '_slider');
            const numberInput = document.getElementById(fieldName);
            
            // Walidacja zakresu
            const min = parseFloat(slider.min);
            const max = parseFloat(slider.max);
            const numValue = parseFloat(value);
            
            if (numValue >= min && numValue <= max) {
                slider.value = value;
                updateSliderColor(slider, value);
                
                // Automatyczne przeliczenie w czasie rzeczywistym z debouncing
                clearTimeout(window.calculateTimeout);
                window.calculateTimeout = setTimeout(calculateRealTime, 300);
            } else {
                // Przywr√≥cenie poprzedniej warto≈õci je≈õli poza zakresem
                numberInput.value = slider.value;
                alert(`Warto≈õƒá musi byƒá miƒôdzy ${min} a ${max}`);
            }
        }

        // Funkcja do przeliczania w czasie rzeczywistym
        async function calculateRealTime() {
            // Pobieranie warto≈õci z formularza
            const gross_margin = document.getElementById('gross_margin').value;
            const target_aov = document.getElementById('target_aov').value;
            const target_ctr = document.getElementById('target_ctr').value;
            const target_cpc = document.getElementById('target_cpc').value;
            const target_cvr = document.getElementById('target_cvr').value;
            const impressions = document.getElementById('impressions').value;
            
            // Sprawdzenie czy wszystkie pola sƒÖ wype≈Çnione
            if (!gross_margin || !target_aov || !target_ctr || !target_cpc || !target_cvr || !impressions) {
                return;
            }
            
            // Pokazanie wska≈∫nika ≈Çadowania
            showLoadingIndicator();
            
            try {
                // Przygotowanie danych do wys≈Çania
                const formData = new FormData();
                formData.append('gross_margin', gross_margin);
                formData.append('target_aov', target_aov);
                formData.append('target_ctr', target_ctr);
                formData.append('target_cpc', target_cpc);
                formData.append('target_cvr', target_cvr);
                formData.append('impressions', impressions);
                
                // Wys≈Çanie zapytania do API
                const response = await fetch('/calculate-forecast', {
                    method: 'POST',
                    body: formData
                });
                
                if (response.ok) {
                    const html = await response.text();
                    updateResultsSection(html);
                } else {
                    console.error('B≈ÇƒÖd podczas obliczania:', response.statusText);
                }
            } catch (error) {
                console.error('B≈ÇƒÖd podczas obliczania:', error);
            } finally {
                hideLoadingIndicator();
            }
        }

        // Funkcja do wy≈õwietlania wska≈∫nika ≈Çadowania
        function showLoadingIndicator() {
            let loadingDiv = document.getElementById('loading-indicator');
            if (!loadingDiv) {
                loadingDiv = document.createElement('div');
                loadingDiv.id = 'loading-indicator';
                loadingDiv.innerHTML = '<div class="loading-spinner">üîÑ Obliczanie...</div>';
                loadingDiv.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(255, 255, 255, 0.95);
                    padding: 20px;
                    border-radius: 10px;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
                    z-index: 1000;
                    font-size: 16px;
                    font-weight: bold;
                `;
                document.body.appendChild(loadingDiv);
            }
            loadingDiv.style.display = 'block';
        }

        // Funkcja do ukrywania wska≈∫nika ≈Çadowania
        function hideLoadingIndicator() {
            const loadingDiv = document.getElementById('loading-indicator');
            if (loadingDiv) {
                loadingDiv.style.display = 'none';
            }
        }

        // Funkcja do aktualizacji sekcji wynik√≥w
        function updateResultsSection(html) {
            // Parsowanie HTML odpowiedzi
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            
            // Znalezienie sekcji wynik√≥w w nowym HTML
            const newResultsSection = doc.querySelector('.results-section');
            
            if (newResultsSection) {
                // Usuniƒôcie starej sekcji wynik√≥w je≈õli istnieje
                const oldResultsSection = document.querySelector('.results-section');
                if (oldResultsSection) {
                    oldResultsSection.remove();
                }
                
                // Dodanie nowej sekcji wynik√≥w
                const forecastForm = document.querySelector('.forecast-form');
                if (forecastForm) {
                    forecastForm.parentElement.insertAdjacentElement('afterend', newResultsSection);
                }
                
                // Ponowne dodanie efekt√≥w hover do kart metryk
                addHoverEffectsToMetricCards();
            }
        }

        // Funkcja do dodawania efekt√≥w hover do kart metryk
        function addHoverEffectsToMetricCards() {
            const metricCards = document.querySelectorAll('.metric-card');
            metricCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
        }

        // Funkcja do aktualizacji koloru suwaka
        function updateSliderColor(slider, value) {
            const min = parseFloat(slider.min);
            const max = parseFloat(slider.max);
            const percentage = ((value - min) / (max - min)) * 100;
            
            slider.style.background = `linear-gradient(to right, #667eea 0%, #667eea ${percentage}%, #ddd ${percentage}%, #ddd 100%)`;
        }

        // Inicjalizacja wszystkich element√≥w przy ≈Çadowaniu strony
        document.addEventListener('DOMContentLoaded', function() {
            // Inicjalizacja suwak√≥w
            const sliders = document.querySelectorAll('input[type="range"]');
            sliders.forEach(slider => {
                updateSliderColor(slider, slider.value);
                
                // Dodanie nas≈Çuchiwania na zmianƒô warto≈õci
                slider.addEventListener('input', function() {
                    updateSliderColor(this, this.value);
                });
            });
            
            // Dodanie event listener√≥w do p√≥l input dla automatycznego przeliczania
            const inputFields = ['gross_margin', 'target_aov', 'target_ctr', 'target_cpc', 'target_cvr', 'impressions'];
            inputFields.forEach(fieldName => {
                const inputField = document.getElementById(fieldName);
                if (inputField) {
                    inputField.addEventListener('input', function() {
                        // Debouncing - op√≥≈∫nienie wykonania aby uniknƒÖƒá zbyt czƒôstych wywo≈Ça≈Ñ
                        clearTimeout(window.calculateTimeout);
                        window.calculateTimeout = setTimeout(calculateRealTime, 500);
                    });
                }
            });
            
            // Ukrycie przycisku "Oblicz prognozƒô" i zmiana na informacyjny tekst
            const submitButton = document.querySelector('.forecast-form button[type="submit"]');
            if (submitButton) {
                submitButton.style.display = 'none';
                
                // Dodanie informacji o automatycznym przeliczaniu
                const infoDiv = document.createElement('div');
                infoDiv.className = 'real-time-info';
                infoDiv.innerHTML = `
                    <div style="
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                        padding: 15px;
                        border-radius: 10px;
                        text-align: center;
                        margin-top: 20px;
                        font-weight: bold;
                        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                    ">
                        ‚ö° Wyniki przeliczajƒÖ siƒô automatycznie w czasie rzeczywistym!
                    </div>
                `;
                submitButton.parentElement.appendChild(infoDiv);
            }
            
            // Domy≈õlne wy≈õwietlenie metody manual
            selectMethod('manual');
            
            // Dodanie efekt√≥w hover do istniejƒÖcych kart metryk
            addHoverEffectsToMetricCards();
            
            // Automatyczne przeliczenie przy pierwszym za≈Çadowaniu strony
            setTimeout(calculateRealTime, 1000);
        });

        // Funkcja do formatowania liczb w czasie rzeczywistym
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        }
    </script>

    <footer>
        <div class="footer-content">
            <div class="footer-branding">
                <span class="footer-brand">By Amzteam.pro</span>
                <span class="footer-creator">Stworzy≈Ç: Bartek z Twoje Drzwi do Amazon</span>
                <span class="footer-tech">Powered by Cursor AI</span>
            </div>
            <div class="footer-copyright">
                <span>¬© 2024 ACOS Forecast Calculator. Profesjonalny kalkulator analizy rentowno≈õci kampanii reklamowych z integracjƒÖ NBP API.</span>
            </div>
        </div>
    </footer>
</body>
</html> 